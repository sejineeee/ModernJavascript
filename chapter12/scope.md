# 스코프

모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효범위가 결정된다.

**렉시컬 스코프**

함수 호출 위치가 아닌 함수 정의 위치에 따라 상위 스코프를 결정한다. 함수 정의가 평가되는 시점에 상위 스코프가 정적으로 결정된다.
```plaintext
반대의 개념으로 동적 스코프가 있다.
동적 스코프는 함수 호출 시점에 동적으로 상위 스코프를 결정한다.
```

## 함수 레벨 스코프

함수에 의해서만 지역 스코프가 생성됨  
`var` 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정함

```javascript
var a = 1;
if (true) {
  var a = 5;
}

console.log(a)
// if 조건문의 코드 블록은 지역스코프로 인정❌
// 그렇기 때문에 재선언 재할당이 되어 값이 5로 변함
```
`var` 키워드는 변수를 중복으로 선언할 수 있고, 변수 호이스팅에 의해 할당하기 전에 변수를 참조해도 에러가 발생하지 않고, 초기화 값인 undefined를 반환한다.
```javascript
console.log(a); // undefined 반환

var a = 3;
```

## 블록 레벨 스코프

모든 코드 블록(함수, if문, for문, while문, try/catch문 등)을 지역 스코프로 인정함

`let, const` 키워드를 사용하여 변수를 선언할 경우 블록 레벨 스코프를 따름

특징| let | const
--|:--:|--:
재할당 | O | X
중복 선언 | X | X
선언 후 할당 | O | X
호이스팅 | X | X

호이스팅이 되지 않는 게 아니고, 발생하지 않는 것처럼 동작한다.

**Temporal Dead Zond**

`let` 키워드의 경우는 선언 단계와 초기화 단계가 분리되어 진행되는데, 초기화 단계는 변수 선언문에 도달했을 때 실행된다. `const` 키워드의 경우 선언과 초기화가 동시에 진행된다.

Temporal Dead Zone(TDZ)는 변수가 값을 완전히 초기화 할 때까지 접근할 수 없는 블록의 영역을 말한다. TDZ는 해당 블록의 지역 스코프의 시작부터 시작되며, 컴퓨터가 변수에 값을 할당하여 완전히 초기화 할 때까지 계속된다.

`let, const`는 호이스팅 될 때 자바스크립트에서 초기화는 하지 않기 때문에 변수는 죽어있고 접근하려고 할 경우, 에러가 발생하는 것이다.

---
참고  
[Temporal Dead Zone](https://www.freecodecamp.org/news/javascript-temporal-dead-zone-and-hoisting-explained/)